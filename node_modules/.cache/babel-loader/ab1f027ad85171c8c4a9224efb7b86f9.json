{"ast":null,"code":"var _jsxFileName = \"/Users/alain/Documents/Cycurid/Demo-Website/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.css\";\nimport { BrowserRouter as Router, Routes, Route, Link, Navigate } from \"react-router-dom\";\nimport { immeOauth, immeLogout } from \"cycurid-widget-js\";\nimport { immeVerification } from \"cycurid-verification-js\";\nimport Login from \"./components/login.component\";\nimport SignUp from \"./components/signup.component\";\nimport Success from \"./components/success.component\";\nimport axios from \"axios\";\nimport { useInterval } from './hooks/useInterval';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [username, setUsername] = useState();\n  const [userData, setUserData] = useState();\n  const [load, setLoad] = useState();\n  const [token, setToken] = useState();\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n  const [documentType, setDocumentType] = useState('');\n  const [documentNumber, setDocumentNumber] = useState('');\n  const [documentCountry, setDocumentCountry] = useState('');\n  const [verifiedData, setVerifiedData] = useState({});\n  useInterval(async () => {\n    const response = await axios.post(`${process.env.REACT_APP_SERVER}/verification/status`, {});\n    setVerifiedData(response.data);\n  }, 1000 * 10);\n  useEffect(() => {\n    console.log(verifiedData);\n  }, [verifiedData]);\n  useEffect(() => {\n    handleGoBack();\n  }, []); // const [verficationData, setVerificationData] = useState();\n\n  let verificationData = [];\n  const config = {\n    origin_url: process.env.REACT_APP_ORIGIN_URL,\n    client_secret: process.env.REACT_APP_CLIENT_SECRET,\n    client_id: process.env.REACT_APP_CLIENT_ID,\n    scope: [\"reference_uuid\", // \"email\",\n    // \"phone\",\n    \"first_name\" // \"last_name\",\n    // \"middle_name\",\n    // \"dob\",\n    // \"address\",\n    // \"city\",\n    // \"zip\",\n    ],\n    entity_name: \"Imme Test Entity\"\n  };\n  const myUserData = {\n    verification: {\n      //callback: \"https://e83c-209-121-124-51.ngrok.io\",\n      callback: \"https://eff6-209-121-124-51.ngrok.io/verification\",\n      person: {\n        first_name: firstName,\n        last_name: lastName\n      },\n      documents: {\n        type: documentType,\n        //driver_license\n        //passport\n        number: documentNumber,\n        country: documentCountry\n      },\n      internal_reference: \"dsafsdfasdfasdfasdf\"\n    }\n  };\n  const verificationConfig = {\n    client_api_key: process.env.REACT_APP_IMME_API_KEY,\n    client_api_secret: process.env.REACT_APP_IMME_API_SECRET,\n    verifiable_data: myUserData\n  }; // useEffect(() => {\n  //   console.log('firstname:' , firstName)\n  // },[firstName])\n\n  function onSuccess(data, token) {\n    setUsername(data.reference_uuid);\n    setUserData(data.user_data);\n    setToken(token);\n    console.log(\"Data requested from scope: \", data);\n  }\n\n  function onFailure(data) {\n    console.log(data);\n  }\n\n  async function signIn(e) {\n    e.preventDefault();\n    immeOauth({ ...config,\n      action: \"login\"\n    }, onSuccess, onFailure);\n  }\n\n  async function signUp(e) {\n    immeOauth({ ...config,\n      action: \"login\"\n    }, onSuccess, onFailure);\n  }\n\n  async function verify(e) {\n    console.log('verificationConfig', verificationConfig);\n    e.preventDefault();\n    immeVerification(verificationConfig, onSuccess, onFailure);\n    console.log('verificationData', verificationData);\n  }\n\n  function logout() {\n    immeLogout(token.access_token, config.client_id, config.client_secret);\n    setUsername(null);\n  }\n\n  async function handleGoBack() {\n    const response = await axios.post(`${process.env.REACT_APP_SERVER}/verification/reset`, {});\n    console.log('response is:', response);\n    setVerifiedData(response.data);\n  }\n\n  useEffect(() => {\n    setLoad(false);\n  }, [load]);\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"navbar navbar-expand-lg navbar-light fixed-top\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            className: \"navbar-brand\",\n            to: \"/sign-in\",\n            children: \"CycurID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this), !username && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"collapse navbar-collapse\",\n            id: \"navbarTogglerDemo02\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"navbar-nav ml-auto\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"nav-item\",\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  className: \"nav-link\",\n                  to: \"/sign-in\",\n                  children: \"Login\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"nav-item\",\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  className: \"nav-link\",\n                  to: \"/sign-up\",\n                  children: \"Sign up\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auth-inner\",\n          children: /*#__PURE__*/_jsxDEV(Routes, {\n            children: [/*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/\",\n              element: Object.keys(verifiedData).length === 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(Login, {\n                  setFirstName: setFirstName,\n                  firstName: firstName,\n                  setLastName: setLastName,\n                  lastName: lastName,\n                  setDocumentType: setDocumentType,\n                  documentType: documentType,\n                  setDocumentNumber: setDocumentNumber,\n                  documentNumber: documentNumber,\n                  setDocumentCountry: setDocumentCountry,\n                  documentCountry: documentCountry,\n                  signIn: signIn,\n                  verify: verify,\n                  setUsername: setUsername,\n                  setToken: setToken,\n                  verificationData: verificationData\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false) :\n              /*#__PURE__*/\n              // <Navigate replace to=\"/success\" />\n              _jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"First name: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: JSON.stringify(verifiedData.verification.person.first_name)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 50\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Last name: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: JSON.stringify(verifiedData.verification.person.last_name)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"Document\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: verifiedData.verification.documents.type\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Doc number: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: JSON.stringify(verifiedData.verification.documents.number)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 50\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Doc country: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: JSON.stringify(verifiedData.verification.documents.country)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 51\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleGoBack,\n                  children: \"Go back\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/sign-in\",\n              element: !username ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(Login, {\n                  signIn: signIn // verify={verify} \n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false) : /*#__PURE__*/_jsxDEV(Navigate, {\n                replace: true,\n                to: \"/success\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/sign-up\",\n              element: !username ? /*#__PURE__*/_jsxDEV(SignUp, {\n                signUp: signUp\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n                replace: true,\n                to: \"/success\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/success\",\n              element: username ? /*#__PURE__*/_jsxDEV(Success, {\n                logout: () => logout,\n                userData: userData\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n                replace: true,\n                to: \"/\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"2w400g7OlYwbQxnM8Mk1beucN0Q=\", false, function () {\n  return [useInterval];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/alain/Documents/Cycurid/Demo-Website/src/App.js"],"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Link","Navigate","immeOauth","immeLogout","immeVerification","Login","SignUp","Success","axios","useInterval","App","username","setUsername","userData","setUserData","load","setLoad","token","setToken","firstName","setFirstName","lastName","setLastName","documentType","setDocumentType","documentNumber","setDocumentNumber","documentCountry","setDocumentCountry","verifiedData","setVerifiedData","response","post","process","env","REACT_APP_SERVER","data","console","log","handleGoBack","verificationData","config","origin_url","REACT_APP_ORIGIN_URL","client_secret","REACT_APP_CLIENT_SECRET","client_id","REACT_APP_CLIENT_ID","scope","entity_name","myUserData","verification","callback","person","first_name","last_name","documents","type","number","country","internal_reference","verificationConfig","client_api_key","REACT_APP_IMME_API_KEY","client_api_secret","REACT_APP_IMME_API_SECRET","verifiable_data","onSuccess","reference_uuid","user_data","onFailure","signIn","e","preventDefault","action","signUp","verify","logout","access_token","Object","keys","length","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.css\";\nimport {\n  BrowserRouter as Router,\n  Routes,\n  Route,\n  Link,\n  Navigate,\n} from \"react-router-dom\";\nimport { immeOauth, immeLogout } from \"cycurid-widget-js\";\nimport { immeVerification } from \"cycurid-verification-js\";\nimport Login from \"./components/login.component\";\nimport SignUp from \"./components/signup.component\";\nimport Success from \"./components/success.component\";\nimport axios from \"axios\";\n\nimport {useInterval} from './hooks/useInterval';\n\nfunction App() {\n  const [username, setUsername] = useState();\n  const [userData, setUserData] = useState();\n  const [load, setLoad] = useState();\n  const [token, setToken] = useState();\n\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n  const [documentType, setDocumentType] = useState('');\n  const [documentNumber, setDocumentNumber] = useState('');\n  const [documentCountry, setDocumentCountry] = useState('');\n\n  const [verifiedData, setVerifiedData] = useState({}); \n\n \n    useInterval(async () => {\n      const response = await axios.post(\n        `${process.env.REACT_APP_SERVER}/verification/status`,\n        { },\n      )\n      setVerifiedData(response.data);\n    }, 1000 * 10);\n\n    useEffect(() => {\n      console.log(verifiedData);\n    },[verifiedData]);\n\n    useEffect(() => {\n      handleGoBack()\n    }, [])\n\n  // const [verficationData, setVerificationData] = useState();\n  let verificationData = [];\n  const config = {\n    origin_url: process.env.REACT_APP_ORIGIN_URL,\n    client_secret: process.env.REACT_APP_CLIENT_SECRET,\n    client_id: process.env.REACT_APP_CLIENT_ID,\n    scope: [\n      \"reference_uuid\",\n      // \"email\",\n      // \"phone\",\n      \"first_name\",\n      // \"last_name\",\n      // \"middle_name\",\n      // \"dob\",\n      // \"address\",\n      // \"city\",\n      // \"zip\",\n    ],\n    entity_name: \"Imme Test Entity\",\n  };\n\n  const myUserData = {\n    verification: {\n      //callback: \"https://e83c-209-121-124-51.ngrok.io\",\n      callback: \"https://eff6-209-121-124-51.ngrok.io/verification\",\n      person: {\n        first_name: firstName,\n        last_name: lastName,\n      },\n      documents: {\n        type: documentType,\n        //driver_license\n        //passport\n        number: documentNumber,\n        country: documentCountry,\n      },\n      internal_reference: \"dsafsdfasdfasdfasdf\",\n    },\n  };\n\n  const verificationConfig = {\n    client_api_key: process.env.REACT_APP_IMME_API_KEY,\n    client_api_secret: process.env.REACT_APP_IMME_API_SECRET,\n    verifiable_data: myUserData,\n  };\n\n// useEffect(() => {\n//   console.log('firstname:' , firstName)\n// },[firstName])\n\n  function onSuccess(data, token) {\n    setUsername(data.reference_uuid);\n    setUserData(data.user_data);\n    setToken(token);\n    console.log(\"Data requested from scope: \", data);\n  }\n\n  function onFailure(data) {\n    console.log(data);\n  }\n\n  async function signIn(e) {\n    e.preventDefault();\n    immeOauth({ ...config, action: \"login\" }, onSuccess, onFailure);\n  }\n  async function signUp(e) {\n\n    immeOauth({ ...config, action: \"login\" }, onSuccess, onFailure);\n  }\n  async function verify(e) {\n    console.log('verificationConfig',verificationConfig)\n    e.preventDefault();\n    immeVerification(verificationConfig, onSuccess, onFailure);\n    console.log('verificationData',verificationData)\n  }\n  function logout() {\n    immeLogout(token.access_token, config.client_id, config.client_secret);\n    setUsername(null);\n  }\n\n  async function handleGoBack() {\n    const response = await axios.post(\n      `${process.env.REACT_APP_SERVER}/verification/reset`,\n      { },\n    )\n    console.log('response is:', response);\n    setVerifiedData(response.data);\n  }\n\n  useEffect(() => {\n    setLoad(false);\n  }, [load]);\n  return (\n    <Router>\n      <div className=\"App\">\n        <nav className=\"navbar navbar-expand-lg navbar-light fixed-top\">\n          <div className=\"container\">\n            <Link className=\"navbar-brand\" to={\"/sign-in\"}>\n              CycurID\n            </Link>\n            {!username && (\n              <div\n                className=\"collapse navbar-collapse\"\n                id=\"navbarTogglerDemo02\"\n              >\n                <ul className=\"navbar-nav ml-auto\">\n                  <li className=\"nav-item\">\n                    <Link className=\"nav-link\" to={\"/sign-in\"}>\n                      Login\n                    </Link>\n                  </li>\n                  <li className=\"nav-item\">\n                    <Link className=\"nav-link\" to={\"/sign-up\"}>\n                      Sign up\n                    </Link>\n                  </li>\n                </ul>\n              </div>\n            )}\n          </div>\n        </nav>\n\n        <div className=\"auth-wrapper\">\n          <div className=\"auth-inner\">\n            <Routes>\n              <Route\n                exact\n                path=\"/\"\n                element={\n                  Object.keys(verifiedData).length === 0 ? (\n                    <>\n                      \n                      <Login\n                      setFirstName={setFirstName}\n                      firstName={firstName}\n                      setLastName={setLastName}\n                      lastName={lastName}\n                      setDocumentType={setDocumentType}\n                      documentType={documentType}\n                      setDocumentNumber={setDocumentNumber}\n                      documentNumber={documentNumber}\n                      setDocumentCountry={setDocumentCountry}\n                      documentCountry={documentCountry}\n\n                      signIn={signIn}\n                      verify={verify}\n                      setUsername={setUsername}\n                      setToken={setToken}\n                      verificationData={verificationData}\n                      />\n                    </>\n     \n                  ) : (\n                    // <Navigate replace to=\"/success\" />\n                    <>\n                     \n                      {/* {Object.keys(verifiedData).map((obj, i) => {\n                        return (\n                          <h4 className=\"text-center\">\n                            {obj}: {verifiedData[obj]}\n                          </h4>\n                        );\n                      })} */}\n                      {/* {verifiedData} */}\n                      \n                        {/* console.log('This is the verified data: ', verifiedData.verification.documents.)\n                        Object.keys(verifiedData.verification.documents).map(key => \n                          <> */}\n                            <h3>Name</h3>\n                            <h4>First name: </h4><p>{JSON.stringify(verifiedData.verification.person.first_name)}</p>\n                            \n                            <h4>Last name: </h4><p>{JSON.stringify(verifiedData.verification.person.last_name)}</p>\n                            <h3>Document</h3>\n                            <h4>{verifiedData.verification.documents.type}</h4>\n                            <h4>Doc number: </h4><p>{JSON.stringify(verifiedData.verification.documents.number)}</p>\n                            <h4>Doc country: </h4><p>{JSON.stringify(verifiedData.verification.documents.country)}</p>\n                            {/* <h4 value={key}>{key.number}</h4>\n                            <h4 value={key}>{key.country}</h4>\n                         </> */}\n\n                      \n                      \n                      <button onClick={handleGoBack}>Go back</button>\n                    </>\n                  \n                  )\n                }\n              />\n              <Route\n                path=\"/sign-in\"\n                element={\n                  !username ? (\n                    <>\n                      <Login signIn={signIn} \n                      // verify={verify} \n                      />\n                    </>\n\n                  ) : (\n                    <Navigate replace to=\"/success\" />\n                  )\n                }\n              />\n              <Route\n                path=\"/sign-up\"\n                element={\n                  !username ? (\n                    <SignUp signUp={signUp} />\n                  ) : (\n                    <Navigate replace to=\"/success\" />\n                  )\n                }\n              />\n\n              <Route\n                path=\"/success\"\n                element={\n                  username ? (\n                    <Success logout={() => logout} userData={userData} />\n                  ) : (\n                    <Navigate replace to=\"/\" />\n                  )\n                }\n              />\n            </Routes>\n          </div>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}